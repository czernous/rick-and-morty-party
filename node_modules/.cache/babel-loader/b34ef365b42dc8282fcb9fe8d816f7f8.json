{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nimport { useCallback, useContext, useEffect, useState } from \"react\";\nimport { Context } from \"./store/Store\";\nexport const useDebounce = (value, delay = 300) => {\n  _s();\n\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n};\n\n_s(useDebounce, \"KDuPAtDOgxm8PU6legVJOb3oOmA=\");\n\nexport const useSearchForm = () => {\n  _s2();\n\n  const [searchValue, setSearchValue] = useState(\"\");\n  const onSearchChange = useCallback(e => setSearchValue(e.target.value), []);\n  return {\n    searchValue,\n    onSearchChange\n  };\n};\n\n_s2(useSearchForm, \"tEvECnL31J/gpOFOQspFwPMDND0=\");\n\nexport const useSkip = query => {\n  _s3();\n\n  const [skip, setSkip] = useState(false);\n  useEffect(() => {\n    if (query.length < 2) {\n      setSkip(true);\n    } else {\n      setSkip(false);\n    }\n  }, [query]);\n  return skip;\n};\n\n_s3(useSkip, \"WFE15z51KTldBWqLuYqPH7kHfcg=\");\n\nexport const useChartacters = (data, queryError) => {\n  _s4();\n\n  const [charState, setCharState] = useState({\n    characters: [],\n    status: \"IDLE\",\n    queryError: \"\"\n  });\n  const [state] = useContext(Context);\n  const excludedIds = [1];\n  useEffect(() => {\n    if (!data) {\n      setCharState({\n        characters: [],\n        status: \"IDLE\",\n        queryError: \"\"\n      });\n      if (queryError !== undefined) return setCharState({\n        characters: [],\n        status: \"ERROR\",\n        queryError: queryError.message\n      });\n      return;\n    }\n\n    const filteredArray = data.characters.results.filter(c => !excludedIds.includes(parseInt(c.id, 10)));\n    let arr = excludedIds.length ? filteredArray : data.characters.results;\n    const charactersArray = arr.slice(0, 6);\n    setCharState({\n      characters: charactersArray,\n      status: \"SUCCES\",\n      queryError: \"\"\n    });\n  }, [data, queryError]);\n  return charState;\n};\n\n_s4(useChartacters, \"Pq7qgIYHWNL6eU/DpFNnsCShago=\");\n\nexport const useChartactersFilter = characters => {\n  _s5();\n\n  const [deletedItems, setDeletedItems] = useState([]);\n  const [partyRick, setPartyRick] = useState();\n  const [partyMorty, setPartyMorty] = useState();\n\n  const getID = e => {\n    if (!e.target) return null;\n    return e.currentTarget.getAttribute(\"data-id\");\n  };\n\n  const onDelete = e => {\n    const id = getID(e);\n    if (!id) return;\n    const deletedId = parseInt(id, 10);\n    if (!deletedItems.includes(deletedId)) setDeletedItems([...deletedItems, deletedId]);\n  };\n\n  const onSelect = e => {\n    const id = getID(e);\n    if (!id) return;\n    const selectedId = parseInt(id, 10);\n    const selectedCharacter = characters.find(c => parseInt(c.id, 10) === selectedId);\n\n    if (selectedCharacter) {\n      /morty/i.test(selectedCharacter.name) ? setPartyMorty(selectedCharacter) : setPartyMorty(partyMorty);\n      /rick/i.test(selectedCharacter.name) ? setPartyRick(selectedCharacter) : setPartyRick(partyRick);\n    }\n  };\n\n  const getExcludedIds = () => {\n    const selectedRick = partyRick ? parseInt(partyRick.id, 10) : null;\n    const selectedMorty = partyMorty ? parseInt(partyMorty.id, 10) : null;\n    dispatch({\n      type: \"SET_EXCLUDEDIDS\",\n      payload: [...deletedItems, selectedMorty, selectedRick].filter(item => item !== null)\n    });\n  };\n\n  getExcludedIds();\n  const [dispatch] = useContext(Context);\n  return {\n    onDelete,\n    onSelect,\n    partyMorty,\n    partyRick\n  };\n};\n\n_s5(useChartactersFilter, \"TYYs+eEvp3OhQ8OLqvhR47NFQSU=\");","map":{"version":3,"sources":["/home/czernous/development/personal/study_projects/rick-and-morty-party/src/hooks.tsx"],"names":["useCallback","useContext","useEffect","useState","Context","useDebounce","value","delay","debouncedValue","setDebouncedValue","timer","setTimeout","clearTimeout","useSearchForm","searchValue","setSearchValue","onSearchChange","e","target","useSkip","query","skip","setSkip","length","useChartacters","data","queryError","charState","setCharState","characters","status","state","excludedIds","undefined","message","filteredArray","results","filter","c","includes","parseInt","id","arr","charactersArray","slice","useChartactersFilter","deletedItems","setDeletedItems","partyRick","setPartyRick","partyMorty","setPartyMorty","getID","currentTarget","getAttribute","onDelete","deletedId","onSelect","selectedId","selectedCharacter","find","test","name","getExcludedIds","selectedRick","selectedMorty","dispatch","type","payload","item"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { ICharacter } from \"./interfaces/ICharacter\";\nimport { ICharactersQuery } from \"./interfaces/ICharactersQuery\";\nimport { Context } from \"./store/Store\";\n\nexport const useDebounce = (value: string, delay: number = 300) => {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n};\n\nexport const useSearchForm = () => {\n  const [searchValue, setSearchValue] = useState(\"\");\n\n  const onSearchChange = useCallback((e) => setSearchValue(e.target.value), []);\n\n  return {\n    searchValue,\n    onSearchChange,\n  };\n};\n\nexport const useSkip = (query: string) => {\n  const [skip, setSkip] = useState(false);\n\n  useEffect(() => {\n    if (query.length < 2) {\n      setSkip(true);\n    } else {\n      setSkip(false);\n    }\n  }, [query]);\n\n  return skip;\n};\n\nexport const useChartacters = (data: any, queryError: any) => {\n  const [charState, setCharState] = useState<ICharactersQuery>({\n    characters: [],\n    status: \"IDLE\",\n    queryError: \"\",\n  });\n\n  const [state] = useContext(Context);\n\n  const excludedIds = [1];\n\n  useEffect(() => {\n    if (!data) {\n      setCharState({ characters: [], status: \"IDLE\", queryError: \"\" });\n      if (queryError !== undefined)\n        return setCharState({\n          characters: [],\n          status: \"ERROR\",\n          queryError: queryError.message,\n        });\n      return;\n    }\n    const filteredArray = data.characters.results.filter(\n      (c: ICharacter) => !excludedIds.includes(parseInt(c.id, 10))\n    );\n    let arr = excludedIds.length ? filteredArray : data.characters.results;\n\n    const charactersArray: ICharacter[] = arr.slice(0, 6);\n\n    setCharState({\n      characters: charactersArray,\n      status: \"SUCCES\",\n      queryError: \"\",\n    });\n  }, [data, queryError]);\n\n  return charState;\n};\n\nexport const useChartactersFilter = (characters: ICharacter[]) => {\n  const [deletedItems, setDeletedItems] = useState<number[]>([]);\n  const [partyRick, setPartyRick] = useState<ICharacter>();\n  const [partyMorty, setPartyMorty] = useState<ICharacter>();\n\n  const getID = (e: React.MouseEvent) => {\n    if (!e.target) return null;\n    return e.currentTarget.getAttribute(\"data-id\");\n  };\n\n  const onDelete = (e: React.MouseEvent): void => {\n    const id = getID(e);\n\n    if (!id) return;\n\n    const deletedId = parseInt(id, 10);\n    if (!deletedItems.includes(deletedId))\n      setDeletedItems([...deletedItems, deletedId]);\n  };\n\n  const onSelect = (e: React.MouseEvent) => {\n    const id = getID(e);\n\n    if (!id) return;\n    const selectedId = parseInt(id, 10);\n    const selectedCharacter = characters.find(\n      (c: ICharacter) => parseInt(c.id, 10) === selectedId\n    );\n\n    if (selectedCharacter) {\n      /morty/i.test(selectedCharacter.name)\n        ? setPartyMorty(selectedCharacter)\n        : setPartyMorty(partyMorty);\n      /rick/i.test(selectedCharacter.name)\n        ? setPartyRick(selectedCharacter)\n        : setPartyRick(partyRick);\n    }\n  };\n\n  const getExcludedIds = () => {\n    const selectedRick = partyRick ? parseInt(partyRick.id, 10) : null;\n    const selectedMorty = partyMorty ? parseInt(partyMorty.id, 10) : null;\n    dispatch({\n      type: \"SET_EXCLUDEDIDS\",\n      payload: [...deletedItems, selectedMorty, selectedRick].filter(\n        (item) => item !== null\n      ),\n    });\n  };\n\n  getExcludedIds();\n\n  const [dispatch] = useContext(Context);\n\n  return {\n    onDelete,\n    onSelect,\n    partyMorty,\n    partyRick,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}