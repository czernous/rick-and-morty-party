{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useQuery, gql } from \"@apollo/client\";\nexport const useSearch = ({\n  searchQuery\n}) => {\n  _s();\n\n  const [state, setState] = useState({\n    characters: [],\n    status: \"IDLE\",\n    error: \"\"\n  });\n  const RM_CHARACTERS = gql`\n    query GetRMcharacters($searchQuery: String!) {\n      characters(name: $searchQuery) {\n        info {\n          count\n        }\n        results {\n          id\n          name\n          image\n        }\n      }\n    }\n  `;\n  const {\n    error,\n    data\n  } = useQuery(RM_CHARACTERS, {\n    variables: searchQuery\n  });\n  useEffect(() => {\n    if (searchQuery.length < 2) return;\n\n    if (!error) {\n      setState({\n        characters: data,\n        status: \"SUCCESS\",\n        error: \"\"\n      });\n    } else {\n      setState({\n        characters: [],\n        status: \"ERROR\",\n        error: error.message\n      });\n    }\n\n    return state;\n  }, [searchQuery, error, data]);\n};\n\n_s(useSearch, \"XqyTO/WRKMslcmxD9fBCTNHjPmE=\", false, function () {\n  return [useQuery];\n});\n\nexport const useDebounce = (value, delay = 300) => {\n  _s2();\n\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n};\n\n_s2(useDebounce, \"KDuPAtDOgxm8PU6legVJOb3oOmA=\");\n\nexport const useSearchForm = () => {\n  _s3();\n\n  const [searchValue, setSearchValue] = useState(\"\");\n  const onSearchChange = useCallback(e => setSearchValue(e.target.value), []);\n  return {\n    searchValue,\n    onSearchChange\n  };\n};\n\n_s3(useSearchForm, \"tEvECnL31J/gpOFOQspFwPMDND0=\");","map":{"version":3,"sources":["/home/czernous/development/personal/study_projects/rick-and-morty-party/src/hooks.tsx"],"names":["useCallback","useEffect","useState","useQuery","gql","useSearch","searchQuery","state","setState","characters","status","error","RM_CHARACTERS","data","variables","length","message","useDebounce","value","delay","debouncedValue","setDebouncedValue","timer","setTimeout","clearTimeout","useSearchForm","searchValue","setSearchValue","onSearchChange","e","target"],"mappings":";;;;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,SAASC,QAAT,EAAmBC,GAAnB,QAA8B,gBAA9B;AAEA,OAAO,MAAMC,SAAc,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAA0B;AAAA;;AACtD,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC;AACjCO,IAAAA,UAAU,EAAE,EADqB;AAEjCC,IAAAA,MAAM,EAAE,MAFyB;AAGjCC,IAAAA,KAAK,EAAE;AAH0B,GAAD,CAAlC;AAMA,QAAMC,aAAa,GAAGR,GAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAbE;AAcA,QAAM;AAAEO,IAAAA,KAAF;AAASE,IAAAA;AAAT,MAAkBV,QAAQ,CAACS,aAAD,EAAgB;AAAEE,IAAAA,SAAS,EAAER;AAAb,GAAhB,CAAhC;AAEAL,EAAAA,SAAS,CAAC,MAAW;AACnB,QAAIK,WAAW,CAACS,MAAZ,GAAqB,CAAzB,EAA4B;;AAC5B,QAAI,CAACJ,KAAL,EAAY;AACVH,MAAAA,QAAQ,CAAC;AACPC,QAAAA,UAAU,EAAEI,IADL;AAEPH,QAAAA,MAAM,EAAE,SAFD;AAGPC,QAAAA,KAAK,EAAE;AAHA,OAAD,CAAR;AAKD,KAND,MAMO;AACLH,MAAAA,QAAQ,CAAC;AACPC,QAAAA,UAAU,EAAE,EADL;AAEPC,QAAAA,MAAM,EAAE,OAFD;AAGPC,QAAAA,KAAK,EAAEA,KAAK,CAACK;AAHN,OAAD,CAAR;AAKD;;AACD,WAAOT,KAAP;AACD,GAhBQ,EAgBN,CAACD,WAAD,EAAcK,KAAd,EAAqBE,IAArB,CAhBM,CAAT;AAiBD,CAxCM;;GAAMR,S;UAqBaF,Q;;;AAqB1B,OAAO,MAAMc,WAAW,GAAG,CAACC,KAAD,EAAgBC,KAAa,GAAG,GAAhC,KAAwC;AAAA;;AACjE,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCnB,QAAQ,CAACgB,KAAD,CAApD;AAEAjB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMqB,KAAK,GAAGC,UAAU,CAAC,MAAM;AAC7BF,MAAAA,iBAAiB,CAACH,KAAD,CAAjB;AACD,KAFuB,EAErBC,KAFqB,CAAxB;AAGA,WAAO,MAAM;AACXK,MAAAA,YAAY,CAACF,KAAD,CAAZ;AACD,KAFD;AAGD,GAPQ,EAON,CAACJ,KAAD,EAAQC,KAAR,CAPM,CAAT;AASA,SAAOC,cAAP;AACD,CAbM;;IAAMH,W;;AAeb,OAAO,MAAMQ,aAAa,GAAG,MAAM;AAAA;;AACjC,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCzB,QAAQ,CAAC,EAAD,CAA9C;AAEA,QAAM0B,cAAc,GAAG5B,WAAW,CAAE6B,CAAD,IAAOF,cAAc,CAACE,CAAC,CAACC,MAAF,CAASZ,KAAV,CAAtB,EAAwC,EAAxC,CAAlC;AAEA,SAAO;AACLQ,IAAAA,WADK;AAELE,IAAAA;AAFK,GAAP;AAID,CATM;;IAAMH,a","sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { useQuery, gql } from \"@apollo/client\";\n\nexport const useSearch: any = ({ searchQuery }: any) => {\n  const [state, setState] = useState({\n    characters: [],\n    status: \"IDLE\",\n    error: \"\",\n  });\n\n  const RM_CHARACTERS = gql`\n    query GetRMcharacters($searchQuery: String!) {\n      characters(name: $searchQuery) {\n        info {\n          count\n        }\n        results {\n          id\n          name\n          image\n        }\n      }\n    }\n  `;\n  const { error, data } = useQuery(RM_CHARACTERS, { variables: searchQuery });\n\n  useEffect((): any => {\n    if (searchQuery.length < 2) return;\n    if (!error) {\n      setState({\n        characters: data,\n        status: \"SUCCESS\",\n        error: \"\",\n      });\n    } else {\n      setState({\n        characters: [],\n        status: \"ERROR\",\n        error: error.message,\n      });\n    }\n    return state;\n  }, [searchQuery, error, data]);\n};\n\nexport const useDebounce = (value: string, delay: number = 300) => {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n};\n\nexport const useSearchForm = () => {\n  const [searchValue, setSearchValue] = useState(\"\");\n\n  const onSearchChange = useCallback((e) => setSearchValue(e.target.value), []);\n\n  return {\n    searchValue,\n    onSearchChange,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}